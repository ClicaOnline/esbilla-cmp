---
import LanguagePicker from './LanguagePicker.astro';
import { useTranslations } from '../i18n/utils';
import { Image } from 'astro:assets';
import logoEsbilla from '../../public/logo-esbilla.png';
const { lang } = Astro.props;
const t = useTranslations(lang);
---
<header class="sticky top-0 z-50 w-full bg-fondu/80 backdrop-blur-md border-b border-stone-200">
  <nav class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between" aria-label="Navegación principal">
    
    <div class="flex items-center gap-12">
      <a href={`/${lang}/`} class="flex items-center gap-3 group shrink-0">
        
              <Image 
        src={logoEsbilla} 
        alt="Logo Esbilla CMP" 
        width={40} 
        height={40} 
        format="webp"
        quality="high"
        class="w-10 h-10 object-contain transition-transform group-hover:rotate-6"
      />
    
        <span class="text-2xl font-black tracking-tighter text-madera uppercase">
          Esbilla<span class="text-maiz">CMP</span>
        </span>
      </a>

      <ul class="hidden md:flex items-center gap-8 border-l border-stone-200 pl-8">
        <li>
          <a href={`/${lang}/saas/`} class="text-sm font-bold text-stone-700 hover:text-madera transition-colors">
            {t('nav.saas')}
          </a>
        </li>
        <li>
          <a href={`/${lang}/comunidad/`} class="text-sm font-bold text-stone-700 hover:text-madera transition-colors">
            {t('nav.community')}
          </a>
        </li>
        <li>
          <a href={`/${lang}/como-empezar/`} class="text-sm font-bold text-stone-700 hover:text-madera transition-colors">
            {t('nav.getstarted')}
          </a>
        </li>
      </ul>
    </div>

    <div class="flex items-center gap-4">
      <div class="flex items-center">
        <LanguagePicker />
      </div>
      
      <button id="menu-toggle" class="md:hidden p-2 text-madera hover:bg-stone-100 rounded-lg transition-colors" aria-label="Abrir menú">
        <svg id="icon-open" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
        <svg id="icon-close" class="w-6 h-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>

    <div id="mobile-menu" class="hidden absolute top-20 left-0 w-full bg-fondu border-b border-stone-200 shadow-xl md:hidden overflow-hidden">
      <ul class="flex flex-col p-6 gap-6">
        <li><a href={`/${lang}/saas/`} class="text-lg font-bold text-madera block">{t('nav.saas')}</a></li>
        <li><a href={`/${lang}/comunidad/`} class="text-lg font-bold text-madera block">{t('nav.community')}</a></li>
        <li><a href={`/${lang}/como-empezar/`} class="text-lg font-bold text-madera block">{t('nav.getstarted')}</a></li>
      </ul>
    </div>
  </nav>
</header>

<script>
  const btn = document.getElementById('menu-toggle');
  const menu = document.getElementById('mobile-menu');
  const iconOpen = document.getElementById('icon-open');
  const iconClose = document.getElementById('icon-close');

  btn?.addEventListener('click', () => {
    menu?.classList.toggle('hidden');
    iconOpen?.classList.toggle('hidden');
    iconClose?.classList.toggle('hidden');
  });
</script>